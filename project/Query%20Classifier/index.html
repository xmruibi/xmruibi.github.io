<!DOCTYPE html>
<html class="no-js" lang="en-US" prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb#">
<head>
    <meta charset="utf-8">

    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="description" content="">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1">


<meta name="keywords" content="Classification, Collaborative Search Engine, ">

 
<meta property="og:type" content="article"/>
<meta property="og:description" content=""/>
<meta property="og:title" content="Query Classifier : rui.com"/>
<meta property="og:site_name" content="Rui"/>
<meta property="og:image" content="" />
<meta property="og:image:type" content="image/jpeg" />
<meta property="og:image:width" content="" />
<meta property="og:image:height" content="" />
<meta property="og:url" content="http://xmruibi.github.io/project/Query%20Classifier/">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2015-10-12"/>
<meta property="article:modified_time" content="2015-10-12"/>



<meta property="article:tag" content="Classification">
<meta property="article:tag" content="Collaborative Search Engine">







    <base href="http://xmruibi.github.io/">
    <title> Query Classifier - xmruibi.github.io </title>
    <link rel="canonical" href="http://xmruibi.github.io/project/Query%20Classifier/">
    

    <link href='https://fonts.googleapis.com/css?family=Indie+Flower' rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="/static/css/style.css">
<script src="https://yandex.st/highlightjs/8.0/highlight.min.js"></script>
<link rel="stylesheet" href="https://yandex.st/highlightjs/8.0/styles/default.min.css">
<script>hljs.initHighlightingOnLoad();</script>



    
    <link rel="apple-touch-icon" href="/apple-touch-icon.png" />
</head>

<body lang="en" itemscope itemtype="http://schema.org/Article">
<header id="header">
    <figure>
      <a href="/" border=0 id="logolink"><img src="apple-touch-icon.png" style="padding-left: 2em"></a>
    </figure>
    <div id="byline">Rui Bi</div>
    <nav id="nav">
            <ul id="mainnav">
            <li>
                <a href="/post/">
                <span class="icon"> <i aria-hidden="true" class="icon-quill"></i></span>
                <span> blog </span>
            </a>
            </li>
            <li>
            <a href="/project/">
                <span class="icon"> <i aria-hidden="true" class="icon-github-2"></i></span>
                <span> code </span>
            </a>
            </li>
            <li>
            <a href="/life/">
                <span class="icon"> <i aria-hidden="true" class="icon-airplane"></i></span>
                <span> life </span>
            </a>
            </li>
            <li>
            <a href="/about">
                <span class="icon"> <i aria-hidden="true" class="icon-happy"></i></span>
                <span> me </span>
            </a> 
            </li>
            
        </ul>

            <ul id="social">
            
            <li id="follow">
                <span class="icon icon-rocket"> </span>
                <span class="title"> follow </span>
                <div class="dropdown follow">
                    <ul class="social">
                        
                        <li> <a href="http://www.linkedin.com/in/ruibi" target="_blank" title="LinkedIn" class="linkedin"><span class="icon icon-linkedin"></span>LinkedIn</a> </li>
                        <li> <a href="http://github.com/xmruibi" target="_blank" title="GitHub" class="github"><span class="icon icon-github"></span>GitHub</a> </li>
                    </ul>
                    
                </div>
            </li>
        </ul>

    </nav>
</header>



<section id="main">
  <h1 itemprop="name" id="title">Query Classifier</h1>
  <div>
        <article itemprop="articleBody" id="content">
           

<p>A system for figuring out the category of user query in search engine and potential subtask of user in group searching task.</p>

<h3 id="basically:21aea27937ec9b5448f6b700405209cb">Basically</h3>

<p>Query classifier is some kind of that when you give a query then it return the most possible category or topic of this query.But things are little bit different here. Because this query classifier is a subproject for collaborative search engine.</p>

<h3 id="as-for-collaborative-search-engine:21aea27937ec9b5448f6b700405209cb">As for Collaborative Search Engine</h3>

<p>That is a search engine platform for a team not an individual (As you know, most of current search engine are just personized for individual). In here we set some experiments according to the real situation that when a team is addressing some problems around a certain task. For example, we assumed a team are planning to go for a travel, so one of guy focus on booking hotel or airline ticket, one guy focus on studying the route of attractions. Then the collaborative search engine should give each person different ranking results.</p>

<h3 id="why-need-query-classifier:21aea27937ec9b5448f6b700405209cb">Why need query classifier?</h3>

<p>We assume that during the collaborative search engine working, a team is working on a certain task. And there is a task statement wrote by natural language. In task statement, the subtopic also indicated by some sentences. (Experiment initial stage) So my query classifier is trying to figure out the input query belong to what kind of subtopic under this task.</p>

<h3 id="procedure:21aea27937ec9b5448f6b700405209cb">Procedure:</h3>

<h4 id="step-0-basic-idea:21aea27937ec9b5448f6b700405209cb">Step 0. Basic idea</h4>

<pre><code>Build language model for each subtopic in one task and get the relevance score between query and subtopic model.  
</code></pre>

<h4 id="step-1-corpus:21aea27937ec9b5448f6b700405209cb">Step 1. Corpus</h4>

<p>Set up Corpus for task and each subtopic
 - Keywords extraction from task statement
     - We believe the keyword should be noun or proper noun or noun phrase from task statement.
     - Then Stanford NLP parser to get part-of-speech tags.<br />
     - There is a little bit tricky during finding the noun phrase. As we know the NLP parser generate the tagging sentences as a tree. Every leaf of tree is the word in sentence. But we need look up the parent nodes or grandparent nodes of leaves to get the phrase tag. So each time even if we find a word is noun or proper noun we still need to check its upper level nodes and consider its tags.</p>

<ul>
<li>Build keywords as query on Google

<ul>
<li>A subtopic can be represent by some keywords combination:</li>
<li>Those keywords can be formed as the queries</li>
<li>Fetch the Google Top 20 Results title and snippet as the subtopic model</li>
</ul></li>
</ul>

<h4 id="step-2-evaluate-query-and-subtopic-relevance:21aea27937ec9b5448f6b700405209cb">Step 2. Evaluate Query and Subtopic Relevance</h4>

<p>I consider both classical statistic model and language model and get relevance score from two part, but different weights on two models (0.8 and 0.2). As we know language model has better performance. Because, the language model is more rely on the real language rules other than the mathematical statistical rules and  the details of how statistics like term frequency and document
length are used differ.</p>

<ul>
<li><p>Query Likelihood Model: Dirichlet Smoothing Algorithm</p>

<ul>
<li>considering term frequency and collection frequency</li>
<li>Using a reference model (collection language model) to discriminate unseen words.
    $$P(w|D) = \frac{c(w,M_D)+\mu\cdot P(w|M_C)}{|D|+\mu}$$
    |D| means the length of current document!
    $c(w,M_D)$ means the term frequency in a document</li>
</ul></li>

<li><p>Vector Space Model: using TF-IDF score</p>

<ul>
<li>The vector between subtopic model and query</li>
<li>but did some query expansion: top 5 snippet from google result as expansion</li>
</ul></li>
</ul>

<h3 id="how-to-implement:21aea27937ec9b5448f6b700405209cb">How to implement?</h3>

<h3 id="subtopic-language-model:21aea27937ec9b5448f6b700405209cb">Subtopic Language Model</h3>

<h4 id="1-keyword-extraction:21aea27937ec9b5448f6b700405209cb">1. Keyword Extraction</h4>

<p>Keywords extraction means to extracted keywords from task statement and subtopic statement. These keywords would be combined as queries to search on Google and crawl their Top 20 result as the language model for subtopic.
In this study, I use the Stanford Nature language parser package to extraction noun word leaves from statement as a keyword, moreover, if a certain noun word leaf has parent node which is noun phrase, the noun phrase should be used as keyword.</p>

<p>Keyword Extraction Example from Task 2 and Task 5
(Word with “+” means the proper noun)</p>

<p>Keywords for Task 2:
Emergence, spread, social networking sites, Facebook+, Myspace+, Twitter+, Delicious+, statistics, popularity, sites, users, time, impacts, students, professionals, commerce, money, examples, usage, services, domains, healthcare, politics</p>

<p>Keywords for Task 5:
 friend, four-day vacation, December+, Helsinki+, Finland+, information, vacation, flights, US+, hotels, activities, goal, joint plan, things, Euros, person, group, vacation, outdoor activity, dining activity, cultural activity, types, addition</p>

<h4 id="2-corpus-set-up:21aea27937ec9b5448f6b700405209cb">2. Corpus Set Up</h4>

<p>According to the keywords extracted from task or subtopic statement, these keywords can be combined as query for each subtopic. Here are the combination rules:</p>

<ul>
<li>1)   Keywords from task statement should regarded as a collection.</li>
<li>2)   Proper Noun words should regarded as a collection.</li>
<li>3)   Keywords from each subtopic statement should regarded as a collection.</li>
<li>4)   Those keywords come from three collections combined as a query represent for each subtopic.</li>
</ul>

<p>Using these query and search the TOP 20 results on Google, the titles and snippets on the Google result pages can regarded as the corpus for describing each subtopic .</p>

<h4 id="3-dirichlet-prior-smoothing:21aea27937ec9b5448f6b700405209cb">3. Dirichlet Prior Smoothing</h4>

<p>Once the corpus built up, We nned build language model for getting the likehood of each query belong to what kind of subtopic. I use Dirichlet Prior Smoothing (DPS) method to get the probability of each term from a query in a certain subtopic language model. Then get product by these probability. The probability can be regarded as score one.</p>

<h4 id="4-collection-expansion:21aea27937ec9b5448f6b700405209cb">4. Collection Expansion</h4>

<p>However, sometimes the term may not get any frequency in collection which is shown as c(w,D) in equation due to the collection may not rich enough for some terms. To deal with this problem, I tried to use the title of task as query to search on Google and get its TOP 50 result as the collection background.</p>

<h3 id="query-expansion:21aea27937ec9b5448f6b700405209cb">Query Expansion</h3>

<h4 id="1-expansion-content:21aea27937ec9b5448f6b700405209cb">1. Expansion Content</h4>

<p>For each user query, I first search the query on Google with fetching its TOP 5 results. The titles and snippets are combined as the query’s expansion.</p>

<h4 id="2-tfidf-similarity-by-vsm:21aea27937ec9b5448f6b700405209cb">2. TFIDF Similarity by VSM</h4>

<p>For each query expansion content and subtopic description content (Language model), they can be figured out with two vectors according the terms TFIDF values in two contents. Using the VSM model with these two vectors, then can calculate the similarity between query expansion content and subtopic description. The similarity value can be regarded as score two in this study.</p>

<h3 id="3-performance-progress:21aea27937ec9b5448f6b700405209cb">3.  Performance Progress</h3>

<p>The experiments are stepping by several stages. At the first stage, only language model with Dirichlet Prior Smoothing score applied to evaluate whether a query matching with the subtopic. Under this case, the precision  of experiment is just over than 0.64. Then after inserting the collection background, the precision is improved to 0.73. Finally, with combining DFS score and VSM similarity score, the precision has lift to over 0.81, which is acceptable for the study. So far, we decide to leave the rest of possible features and only use the DFS score and VSM similarity score for the query – subtopic rank system.</p>

        </article>
  </div>
</section>

<aside id="meta">
    <div itemscope itemtype="http://schema.org/SoftwareApplication" id="projectmeta">
        

        
        <span class="smaller" itemprop="author" itemscope itemtype="http://schema.org/Person">
            Author: <span itemprop="name">Rui Bi</span></span><br>
        <br>
        
        
        
        <meta itemprop="publisher" content="rui.com">
        <meta itemprop="softwareApplicationCategory" content="UtilitiesApplication">
        <meta itemprop="operatingSystems" content="Windows 7 and above, OSX 10.7 and above, linux">
    </div>


    <div>
        <section id="datecount">
          <h4 id="date"> Mon Oct 12, 2015 </h4>
          <h5 id="wc"> 1145 Words </h5>
          <h5 id="readtime"> Read in about 6 Min </h5>
        </section>
        <ul id="categories">
          
            <li><a href="http://xmruibi.github.io//topics/information-retrieval">Information Retrieval</a> </li>
          
            <li><a href="http://xmruibi.github.io//topics/machine-learning">Machine Learning</a> </li>
          
        </ul>
  
        <ul id="tags">
          
            <li> <a href="http://xmruibi.github.io//tags/classification">Classification</a> </li>
          
            <li> <a href="http://xmruibi.github.io//tags/collaborative-search-engine">Collaborative Search Engine</a> </li>
          
        </ul>

        <ul id="levels">
          
        </ul>
    </div>

    <div>
        <section id="prev">
            &nbsp;
        </section>
        <section id="next">
            &nbsp;<a class="next" href="http://xmruibi.github.io/post/algorithms/RouteBetweenDirectedGraph/">Route Between Two Nodes in Directed Graph <i class="icon-arrow-right"></i></a>
        </section>
    </div>

    <div>
        <section id="author">
             <h4>Note:</h4> 
            <p>
                ....
            </p>
        </section>
    </div>

</aside>

<meta itemprop="wordCount" content="1145">
<meta itemprop="datePublished" content="2015-10-12">
<meta itemprop="url" content="http://xmruibi.github.io/project/Query%20Classifier/">



<div id="outer_ribbon">
<div id="ribbon">
    <a href="https://github.com/xmruibi/SearchEngineQueryClassifier" rel="me">Fork me on GitHub</a>
</div> </div>


<footer>
  <div>
    <p>
    &copy; 2014 - 2015 <span itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">Rui Bi</span>,</span>
    Some rights reserved;<br>
    Powered by <a href="http://gohugo.io">Hugo</a>. Themes By <a href="http://spf13.com/"> SPF13</a>
        Hosted by <a href="http://xmruibi.github.io">Github</a>.
    </p>
  </div>
</footer>
<script type="text/javascript">
(function(){var j=function(a,b){return window.getComputedStyle?getComputedStyle(a).getPropertyValue(b):a.currentStyle[b]};var k=function(a,b,c){if(a.addEventListener)a.addEventListener(b,c,false);else a.attachEvent('on'+b,c)};var l=function(a,b){for(key in b)if(b.hasOwnProperty(key))a[key]=b[key];return a};window.fitText=function(d,e,f){var g=l({'minFontSize':-1/0,'maxFontSize':1/0},f);var h=function(a){var b=e||1;var c=function(){a.style.fontSize=Math.max(Math.min(a.clientWidth/(b*10),parseFloat(g.maxFontSize)),parseFloat(g.minFontSize))+'px'};c();k(window,'resize',c)};if(d.length)for(var i=0;i<d.length;i++)h(d[i]);else h(d);return d}})();
fitText(document.getElementById('title'), 1)
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-7131036-1', 'rui.com');
  ga('require', 'linkid', 'linkid.js');
  ga('require', 'displayfeatures');
  ga('send', 'pageview');
</script>
</body>
</html>

