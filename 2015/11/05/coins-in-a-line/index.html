<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]> <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]> <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Coins in a Line  &middot; Rui&#39;s Home Page</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1">


<meta name="description" content="" />

<meta name="keywords" content="Dynamic Programming, Array, ">


<meta property="og:title" content="Coins in a Line  &middot; Rui&#39;s Home Page ">
<meta property="og:site_name" content="Rui&#39;s Home Page"/>
<meta property="og:url" content="http://xmruibi.github.io/2015/11/05/coins-in-a-line/" />
<meta property="og:locale" content="en-us">


<meta property="og:type" content="article" />
<meta property="og:description" content=""/>
<meta property="og:article:published_time" content="2015-11-05T13:10:29-07:00" />
<meta property="og:article:modified_time" content="2015-11-05T13:10:29-07:00" />

  
    
<meta property="og:article:tag" content="Dynamic Programming">
    
<meta property="og:article:tag" content="Array">
    
  

  
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@" />
<meta name="twitter:creator" content="@" />
<meta name="twitter:title" content="Coins in a Line" />
<meta name="twitter:description" content="" />
<meta name="twitter:url" content="http://xmruibi.github.io/2015/11/05/coins-in-a-line/" />
<meta name="twitter:domain" content="http://xmruibi.github.io">
  

<script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "Article",
    "headline": "Coins in a Line",
    "author": {
      "@type": "Person",
      "name": "http://profiles.google.com/+?rel=author"
    },
    "datePublished": "2015-11-05",
    "description": "",
    "wordCount":  697 
  }
</script>



<link rel="canonical" href="http://xmruibi.github.io/2015/11/05/coins-in-a-line/" />

<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://xmruibi.github.io/touch-icon-144-precomposed.png">
<link href="http://xmruibi.github.io/favicon.png" rel="icon">

<meta name="generator" content="Hugo 0.14" />

  <!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<link href='https://fonts.googleapis.com/css?family=Merriweather:300%7CRaleway%7COpen+Sans' rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="http://xmruibi.github.io/css/font-awesome.min.css">
<link rel="stylesheet" href="http://xmruibi.github.io/css/style.css">
<link rel="stylesheet" href="http://xmruibi.github.io/css/search.css">
<link rel="stylesheet" href="http://xmruibi.github.io/css/highlight/default.css">

  
</head>
<body>
  <main id="main-wrapper" class="container main_wrapper has-sidebar">
    <header id="main-header" class="container main_header">
  <div class="container brand">
  <div class="container title h1-like">
  <a class="baselink" href="http://xmruibi.github.io"> 
  Geek Think

</a> 

</div>

  
<div class="container topline">
  
  A Thinker, A Coder, A Traveler


</div>


</div>

  <nav class="container nav primary no-print">
  

<a class="homelink" href="http://xmruibi.github.io">Home</a>


  
<a href="http://xmruibi.github.io/topics/algorithm" title="Discuss algorithm questions"

>
Algorithm

</a>

<a href="http://xmruibi.github.io/code" title="Show my projects"

>
Project

</a>

<a href="http://xmruibi.gitbooks.io/interview-preparation-notes/content/" title="about Interview Preparation"

>
My GitBook

</a>

<a href="http://xmruibi.github.io/life" title="Show my travels"

>
Travel

</a>

<a href="http://xmruibi.github.io/post" title="Show list of archived posts"

>
Archive

</a>


</nav>

<div class="container nav primary no-print" style="position: relative;
 margin-top: 2em;margin-bottom: 2em; ">
<form role="search" id="search">
	<input id="page" name="p" value="1" type="hidden"/>
	<input id="query" name="q" type="search" class="st-default-search-input" placeholder="Search">
</form>
 </div>
<div class="container nav secondary no-print" style="position: relative; margin-top:20em;">
  
<a href="http://xmruibi.github.io/about">About</a>

<a href="http://xmruibi.github.io/tags" title="Show list of tags">Tags</a>

<a href="http://xmruibi.github.io/topics" title="Show list of topics">Topics</a>


</div>
<div class="container nav secondary no-print" style="position: relative;
 margin-bottom: 0em;">
  
<a id="contact-link-email" class="contact_link" href="mailto:xmruibi@gmail.com">
  <span class="fa fa-envelope-square"></span><span>email</span></a>



<a id="contact-link-github" class="contact_link" href="https://github.com/xmruibi">
  <span class="fa fa-github-square"></span><span>github</span></a>





<a id="contact-link-linkedin" class="contact_link" href="fr.linkedin.com/in/ruibi">
  <span class="fa fa-linkedin-square"></span><span>linkedin</span></a>













</div>


  

</header>


<article id="main-content" class="container main_content single">
  <header class="container hat">
  <h1>Coins in a Line
</h1>

  <div class="metas">
<time datetime="2015-11-05">5 Nov, 2015</time>


  
  &middot; Read in about 4 min
  &middot; (697 Words)
  <br>
  Tags: 

<a class="label" href="http://xmruibi.github.io/tags/dynamic-programming">Dynamic Programming; </a> 


<a class="label" href="http://xmruibi.github.io/tags/array">Array; </a> 


  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  Topics: 

<a class="label" href="http://xmruibi.github.io/topics/algorithm">Algorithm; </a> 


</div>

</header>

  <div class="container content">
  

<h2 id="problem-i">Problem I</h2>

<p>There are n coins in a line. Two players take turns to take one or two coins from right side until there are no more coins left. The player who take the last coin wins.</p>

<p>Could you please decide the first play will win or lose?</p>

<h4 id="example">Example</h4>

<p>n = <code>1</code>, return <code>true</code>.</p>

<p>n = <code>2</code>, return <code>true</code>.</p>

<p>n = <code>3</code>, return <code>false</code>.</p>

<p>n = <code>4</code>, return <code>true</code>.</p>

<p>n = <code>5</code>, return <code>true</code>.</p>

<h4 id="challenge">Challenge</h4>

<p>$O(n)$ time and $$O(1)$$ memory</p>

<h3 id="think">Think</h3>

<ul>
<li>Only if the amount of coin is the multiply of <code>3</code>, first player cannot win.</li>
</ul>

<h3 id="solution">Solution</h3>

<pre><code class="language-java">    /**
     * @param n: an integer
     * @return: a boolean which equals to true if the first player will win
     */
    public boolean firstWillWin(int n) {
        return n%3!=0;
    }
</code></pre>

<h2 id="problem-ii">Problem II</h2>

<p>There are n coins with different value in a line. Two players take turns to take one or two coins from left side until there are no more coins left. The player who take the coins with the most value wins.</p>

<p>Could you please decide the first player will win or lose?</p>

<h4 id="example-1">Example</h4>

<p>Given values array A = <code>[1,2,2]</code>, return true.</p>

<p>Given A = <code>[1,2,4]</code>, return false.</p>

<h3 id="think-1">Think</h3>

<h5 id="state">State</h5>

<p><code>dp[i]</code> represent the max value it can get from <code>i</code> to the end</p>

<h5 id="function">Function</h5>

<p>Each time when iterate <code>i</code>, we have two choice:</p>

<ul>
<li>takes <code>values[i]</code></li>
<li>takes <code>values[i] + values[i+1]</code></li>
</ul>

<p>Here are what we need to think:</p>

<ul>
<li><p>1.If we took <code>values[i]</code>, opposite has two choice:  <code>values[i+1]</code> or <code>values[i+1] + values[i+2]</code> so the rest values for our own sides are <code>DP[i+2]</code> or <code>DP[i+3]</code>, however it should choose the minimum so that the opposite can get the maximum.</p>

<p>$$value1 = values[i] + min(DP[i+2], DP[i+3])$$</p></li>

<li><p>2.If we took  <code>values[i] + values[i+1]</code></p>

<p>$$value2 = values[i] + values[i+1] + min(DP[i+3], DP[i+4])$$</p></li>

<li><p>3.</p>

<p>$$dp[I] = max(value1, value2)$$</p></li>
</ul>

<h3 id="solution-1">Solution</h3>

<pre><code class="language-java">    /**
     * @param values: an array of integers
     * @return: a boolean which equals to true if the first player will win
     */
    public boolean firstWillWin(int[] values) {
        if (values == null || values.length &lt;= 2) {
            return true;
        }
        int dp[] = new int[values.length];
        
        dp[values.length-1] = values[values.length-1];
        dp[values.length-2] = values[values.length-1] + values[values.length-2];
        int total = dp[values.length-2];
        
        for(int i = values.length - 3; i &gt;= 0; i--) {
            total += values[i];
            int value1 = values[i] + Math.min(dp[i+2], i+3&lt;values.length?dp[i+3]:0);
            int value2 = values[i] + values[i+1] + Math.min(i+3&lt;values.length?dp[i+3]:0, i+4&lt;values.length?dp[i+4]:0);
            dp[i] = Math.max(value1, value2);
        }
        
        return dp[0] &gt; (total - dp[0]);
    }
</code></pre>

<h2 id="problem-iii">Problem III</h2>

<p>There are n coins in a line. Two players take turns to take a coin from one of the ends of the line until there are no more coins left. The player with the larger amount of money wins.</p>

<p>Could you please decide the first player will win or lose?</p>

<h4 id="example-2">Example</h4>

<p>Given array A = <code>[3,2,2]</code>, return true.</p>

<p>Given array A = <code>[1,2,4]</code>, return true.</p>

<p>Given array A = <code>[1,20,4]</code>, return false.</p>

<h4 id="challenge-1">Challenge</h4>

<p>Follow Up Question: If <code>n</code> is even. Is there any hacky algorithm that can decide whether first player will win or lose in $$O(1)$$ memory and $O(n)$ time?</p>

<h3 id="think-2">Think</h3>

<h5 id="state-1">State</h5>

<p><code>dp[i][j]</code> represent the max value it can get from <code>i</code> to <code>j</code></p>

<p><code>sum[i][j]</code> represent the sum value from <code>i</code> to <code>j</code></p>

<h5 id="function-1">Function</h5>

<p>Each time when taken coins, we have two choice:</p>

<ul>
<li>takes <code>values[i]</code></li>
<li>takes <code>values[j]</code></li>
</ul>

<p>$$dp[i][j]=max(values[i]+sum[i+1][j]-dp[i+1][j], values[j]+sum[i][j-1]-dp[i][j-1])$$</p>

<p>Since <code>values[i]+sum[i+1][j]</code> or <code>values[j]+sum[i][j-1]</code> equals to <code>sum[i][j]</code></p>

<p>So the equation can be $dp[i][j] = sum[i][j] - min(dp[i+1][j],dp[i][j-1])$</p>

<h3 id="solution-2">Solution</h3>

<pre><code class="language-java">    /**
     * @param values: an array of integers
     * @return: a boolean which equals to true if the first player will win
     */
    public boolean firstWillWin(int[] values) {
        if (values == null || values.length &lt;= 2) {
            return true;
        }
        
        int[][] dp = new int[values.length][values.length];
        int[][] sum = new int[values.length][values.length];
        // get the sum of i to j
        for(int i = 0; i &lt; values.length; i++){
            for(int j  = i; j &lt; values.length; j++) {
                if(i == j)
                    sum[i][j] = values[i];
                else
                    sum[i][j] = values[j] + sum[i][j-1];
            }
        }
        
        // to do the dp 
        for(int i = values.length - 1; i &gt;= 0; i--){
            for(int j  = i; j &lt; values.length; j++) {
                if(i == j)
                    dp[i][j] = values[i];
                else
                    dp[i][j] = sum[i][j] - Math.min(dp[i+1][j],dp[i][j-1]);
            }
        }
        
        return dp[0][values.length - 1] &gt; sum[0][values.length - 1] - dp[0][values.length - 1];
    }
</code></pre>

</div>


  <footer class="container">
  <div class="container navigation no-print">
  <h2>Navigation</h2>
  
  

    
    <a class="prev" href="http://xmruibi.github.io/2015/11/05/distinct-subsequences/" title="Distinct Subsequences">
      Earlier Article
    </a>
    

    
    <a class="next" href="http://xmruibi.github.io/2015/11/05/palindrome-partitioning/" title="Palindrome Partitioning">
      Newer Article
    </a>
    

  


</div>

  <div class="container comments">
  <h2>Comments</h2>
  
<div id="disqus_thread"></div>
<script type="text/javascript">
  (function() {
    
    
    
    

    var dsq = document.createElement('script'); dsq.async = true; dsq.type = 'text/javascript';
    dsq.src = '//ruisblog.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


</div>

</footer>

</article>
      <footer id="main-footer" class="container main_footer">
  

  <div class="container nav foot no-print">
<a class="toplink" href="#">Go top</a>

</div>
<div class="container nav foot no-print">
  

  
</div>
  <div class="container credits">
  
<div class="container footline">
  
  Code with <i class='fa fa-heart'> Rui Bi</i>


</div>


  
<div class="container copyright">
  
  &copy; 2015 Rui Bi.


</div>


</div>

</footer>

    </main>
    <script src="http://xmruibi.github.io/js/jquery.min.js"></script>
<script src="http://xmruibi.github.io/js/bootstrap.min.js"></script>
<script src="http://xmruibi.github.io/js/bootstrap.js"></script>
<script src="http://xmruibi.github.io/js/npm.js"></script>
<script src="http://xmruibi.github.io/js/prism.js"></script>
<script src="http://xmruibi.github.io/js/handlebars.js"></script>
<script src="http://xmruibi.github.io/js/search.js"></script>


<script type="text/javascript">
  window.MathJax = {
    tex2jax: {
      inlineMath: [ ['$$','$$'], ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  };
</script>
<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML">
</script>


<script src="http://xmruibi.github.io/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>



<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new
    Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-69058903-1', 'auto');
  ga('send', 'pageview');;
</script>

<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
  (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
  e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install','DEzVrzaxVLoB451jJ6Py','2.0.0');
</script>

    
  </body>
</html>

