<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]> <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]> <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Chess Game  &middot; Rui&#39;s Home Page</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1">


<meta name="description" content="" />

<meta name="keywords" content="Object Oriented Programming, ">


<meta property="og:title" content="Chess Game  &middot; Rui&#39;s Home Page ">
<meta property="og:site_name" content="Rui&#39;s Home Page"/>
<meta property="og:url" content="http://xmruibi.github.io/2015/10/21/chess-game/" />
<meta property="og:locale" content="en-us">


<meta property="og:type" content="article" />
<meta property="og:description" content=""/>
<meta property="og:article:published_time" content="2015-10-21T11:16:26-07:00" />
<meta property="og:article:modified_time" content="2015-10-21T11:16:26-07:00" />

  
    
<meta property="og:article:tag" content="Object Oriented Programming">
    
  

  
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@" />
<meta name="twitter:creator" content="@" />
<meta name="twitter:title" content="Chess Game" />
<meta name="twitter:description" content="" />
<meta name="twitter:url" content="http://xmruibi.github.io/2015/10/21/chess-game/" />
<meta name="twitter:domain" content="http://xmruibi.github.io">
  

<script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "Article",
    "headline": "Chess Game",
    "author": {
      "@type": "Person",
      "name": "http://profiles.google.com/+?rel=author"
    },
    "datePublished": "2015-10-21",
    "description": "",
    "wordCount":  955 
  }
</script>



<link rel="canonical" href="http://xmruibi.github.io/2015/10/21/chess-game/" />

<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://xmruibi.github.io/touch-icon-144-precomposed.png">
<link href="http://xmruibi.github.io/favicon.png" rel="icon">

<meta name="generator" content="Hugo 0.14" />

  <!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<link href='https://fonts.googleapis.com/css?family=Merriweather:300%7CRaleway%7COpen+Sans' rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="http://xmruibi.github.io/css/font-awesome.min.css">
<link rel="stylesheet" href="http://xmruibi.github.io/css/style.css">
<link rel="stylesheet" href="http://xmruibi.github.io/css/search.css">
<link rel="stylesheet" href="http://xmruibi.github.io/css/highlight/default.css">

  
</head>
<body>
  <main id="main-wrapper" class="container main_wrapper has-sidebar">
    <header id="main-header" class="container main_header">
  <div class="container brand">
  <div class="container title h1-like">
  <a class="baselink" href="http://xmruibi.github.io"> 
  Geek Think

</a> 

</div>

  
<div class="container topline">
  
  A Thinker, A Coder, A Traveler


</div>


</div>

  <nav class="container nav primary no-print">
  

<a class="homelink" href="http://xmruibi.github.io">Home</a>


  
<a href="http://xmruibi.github.io/topics/algorithm" title="Discuss algorithm questions"

>
Algorithm

</a>

<a href="http://xmruibi.github.io/code" title="Show my projects"

>
Project

</a>

<a href="http://xmruibi.gitbooks.io/interview-preparation-notes/content/" title="about Interview Preparation"

>
My GitBook

</a>

<a href="http://xmruibi.github.io/life" title="Show my travels"

>
Travel

</a>

<a href="http://xmruibi.github.io/post" title="Show list of archived posts"

>
Archive

</a>


</nav>

<div class="container nav primary no-print" style="position: relative;
 margin-top: 2em;margin-bottom: 2em; ">
<form role="search" id="search" action="/search">
	<input id="page" name="p" value="1" type="hidden"/>
	<input id="query" name="q" type="search" placeholder="Search">
</form>
 </div>
<div class="container nav secondary no-print" style="position: relative; margin-top:20em;">
  
<a href="http://xmruibi.github.io/about">About</a>

<a href="http://xmruibi.github.io/tags" title="Show list of tags">Tags</a>

<a href="http://xmruibi.github.io/topics" title="Show list of topics">Topics</a>


</div>
<div class="container nav secondary no-print" style="position: relative;
 margin-bottom: 0em;">
  
<a id="contact-link-email" class="contact_link" href="mailto:xmruibi@gmail.com">
  <span class="fa fa-envelope-square"></span><span>email</span></a>



<a id="contact-link-github" class="contact_link" href="https://github.com/xmruibi">
  <span class="fa fa-github-square"></span><span>github</span></a>





<a id="contact-link-linkedin" class="contact_link" href="fr.linkedin.com/in/ruibi">
  <span class="fa fa-linkedin-square"></span><span>linkedin</span></a>













</div>


  

</header>


<article id="main-content" class="container main_content single">
  <header class="container hat">
  <h1>Chess Game
</h1>

  <div class="metas">
<time datetime="2015-10-21">21 Oct, 2015</time>


  
  &middot; Read in about 5 min
  &middot; (955 Words)
  <br>
  Tags: 

<a class="label" href="http://xmruibi.github.io/tags/object-oriented-programming">Object Oriented Programming; </a> 


  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  Topics: 

<a class="label" href="http://xmruibi.github.io/topics/design">Design; </a> 


</div>

</header>

  <div class="container content">
  

<p>This typical question in many interview&rsquo;s OO Design part; Design a chess game with object-oriented programming principle.</p>

<h2 id="description">Description</h2>

<p>Game is an object contains the single board and two players. It should has a function to run the entire game and make turn on each player. It also should has a method to accounce the win or lose.</p>

<p>Board can be a singleton object and holds 8 times 8 two dimension array of Spot object.
Every operation on piece should based on the board, like initial the piece, execute the step.</p>

<p>In spot object, it holds the piece and piece can occupy this spot or spot release a piece.</p>

<p>The piece object can be an abstract class that extended by different kinds like queen, king&hellip;
In piece object, the color also need to be marked. In each concrete class, different kind of piece has different step approach. So there must haa a concrete method to check the step commond is valid.</p>

<p>Player can hold some information about the color and the times of win or lost.</p>

<h2 id="basic-object-design">Basic Object Design</h2>

<ul>
<li><p>Game:</p>

<ul>
<li>Hold the Board and Players</li>
</ul></li>

<li><p>Board (Singleton):</p>

<ul>
<li>Hold spots with 8$$\times$$8</li>
<li>Move Piece</li>
<li>Remove Piece</li>
</ul></li>

<li><p>Spot:</p>

<ul>
<li>Hold Pieces</li>
</ul></li>

<li><p>Piece (Abstract):</p>

<ul>
<li>Concreted classes with 8 Pawns, 2 Rooks, 2 Bishops, 2 Knights, 1 Queen, 1 King</li>
<li>Owner(color)</li>
</ul></li>

<li><p>Player (Abstract):</p>

<ul>
<li>Concreted classes for Human and Computer players</li>
<li>Own Piece</li>
<li>Commands List</li>
</ul></li>

<li><p>Command</p>

<ul>
<li>Piece</li>
<li>Destination x, y</li>
</ul></li>
</ul>

<h2 id="solution-for-basic-part">Solution for Basic Part</h2>

<h4 id="here-we-can-achieve-the-step-move-and-check-the-win-for-player">Here we can achieve the step move and check the win for player</h4>

<ul>
<li>Game:</li>
</ul>

<pre><code class="language-java">public class Game{
	final static Board board;
	Player p1;
	Player p2;

	public Game() {
		board = new Board();
	}

	public boolean enterPlayer(Player p) {
		if(p1 == null)
			this.p1 = p;
		else if(p2 == null)
			this.p2 = p;
		else
			return false;

		board.initialize(p);
		return true;
	}

	public void processTurn(Player p) {
		// Player make a command and until it is valid
		// System input
		do{
			Command cmd = new Command(input);
			p.addCommand(cmd);
		}while(!board.executeMove(p));
	}

	public startGame(){
		// player enter the game:
		enterPlayer(new ComputerPlayer(&quot;Computer&quot;));
		enterPlayer(new HumanPlayer(&quot;Bill&quot;));

		while(true) {
			processTurn(p1);
			if(this.board.getWin()) {
				System.out.println(&quot;P1 win!&quot;);
				break;
			}
			processTurn(p2);
			if(this.board.getWin()) {
				System.out.println(&quot;P2 win!&quot;);
				break;
			}
		}
	}
}

</code></pre>

<ul>
<li>Board:</li>
</ul>

<pre><code class="language-java">public class Board{

	private Spot[][] spots;
	private boolean win; // mark the win or not

	public Board(){
		win = false;
		spots = new Spot[8][8];
	}

	public void initialize(Player p){
		// put the pieces with initial status
		for(int i=0; i&lt;p.getPieces().size(); i++){
            spots[p.getPieces().get(i).getX()][p.getPieces().get(i).getY()].occupySpot(p.getPieces().get(i));
        }
	}

	public boolean executeMove(Player p) {
		Command cmd = p.getCurrentCmd();
		Piece piece = cmd.getPiece();

		// check the move step is valid for piece
		if(!piece.validMove(this, cmd.curX, cmd.curY, cmd.desX, cmd.desY)) {
			// if not valid cmd remove the command and return false
			p.removeCurrentCmd();
			return false;
		}

		// check the two pieces side
		if(spot[cmd.desX][cmd.desY] != null &amp;&amp; spot[cmd.desX][cmd.desY].color == piece.color)
			return false;

		// check and change the state on spot
		Piece taken = spot[cmd.desX][cmd.desY].occupySpot(piece);
		if(taken != null &amp;&amp;taken.getClass().getName().equals(&quot;King&quot;))
			board.win = true;
		spot[cmd.curX][cmd.curY].releaseSpot;
		return true;
	}

	public boolean getWin() {
		return win;
	}
}
</code></pre>

<ul>
<li>Spot:</li>
</ul>

<pre><code class="language-java">public class Spot {
    int x;
    int y;
    Piece piece;

    public Spot(int x, int y) {
        super();
        this.x = x;
        this.y = y;
        piece = null;
    }

    // return original piece
    public void occupySpot(Piece piece){
    	Piece origin = this.piece;
        //if piece already here, delete it, i. e. set it dead
        if(this.piece != null) {
            this.piece.setAvailable(false);
        }
        //place piece here
        this.piece = piece;
        return origin;
    }

    public boolean isOccupied() {
        if(piece != null)
            return true;
        return false;
    }

    public Piece releaseSpot() {
        Piece releasedPiece = this.piece;
        this.piece = null;
        return releasedPiece;
    }

    public Piece getPiece() {
    	return this.piece;
    }
}
</code></pre>

<ul>
<li>Pieces:</li>
</ul>

<pre><code class="language-java">public class Piece {
    private int x;
    private int y;

    private boolean available; // mark the live or dead
    private int color; // mark the owner

    public Piece(boolean available, int x, int y, int color) {
        super();
        this.available = available;
        this.x = x;
        this.y = y;
        this.color = color;
    }


    public boolean isAvailable() {
        return available;
    }
    public void setAvailable(boolean available) {
        this.available = available;
    }
    public int getX() {
        return x;
    }
    public void setX(int x) {
        this.x = x;
    }
    public int getY() {
        return y;
    }
    public void setY(int y) {
        this.y = y;
    }

    public boolean isValid(Board board, int fromX, int fromY, int toX, int toY){
        // different by character of piece
    }

}

public class King extends Piece{ 
	@Override
    public boolean isValid(Board board, int fromX, int fromY, int toX, int toY) {
    }	
}
// ..... for Queen, Rook, Bishop, Pawn

</code></pre>

<ul>
<li>Player:</li>
</ul>

<pre><code class="language-java">public class Player {

    public int color;

    private List&lt;Piece&gt; pieces = new ArrayList&lt;&gt;();

    private List&lt;Command&gt; cmds = new ArrayList&lt;&gt;();

    public Player(int color) {
        super();
        this.color = color;
        initializePieces();
    }

    public List&lt;Piece&gt; getPieces() {
        return pieces;
    }

    public Command getCurrentCmd(){
    	if(cmds != null || cmds.size() != 0)
    		return null;
    	return cmds.get(cmds.size() - 1);
    }

    public void removeCurrentCmd(){
    	if(cmds != null || cmds.size() != 0)
    		return;
    	cmds.remove(cmds.size() - 1);
    }

    public void initializePieces(){
        if(this.color == 1){
            for(int i=0; i&lt;8; i++){ // draw pawns
                pieces.add(new Pawn(true,i,2, 1));
            }
            pieces.add(new Rook(true, 0, 0, 1));
            pieces.add(new Rook(true, 7, 0, 1));
            pieces.add(new Bishop(true, 2, 0, 1));
            pieces.add(new Bishop(true, 5, 0, 1));
            pieces.add(new Knight(true, 1, 0, 1));
            pieces.add(new Knight(true, 6, 0, 1));
            pieces.add(new Queen(true, 3, 0, 1));
            pieces.add(new King(true, 4, 0, 1));
        }
        else{
            for(int i=0; i&lt;PAWNS; i++){ // draw pawns
                pieces.add(new Pawn(true,i,6, 0));
            }
            pieces.add(new Rook(true, 0, 7, 0));
            pieces.add(new Rook(true, 7, 7, 0));
            pieces.add(new Bishop(true, 2, 7, 0));
            pieces.add(new Bishop(true, 5, 7, 0));
            pieces.add(new Knight(true, 1, 7, 0));
            pieces.add(new Knight(true, 6, 7, 0));
            pieces.add(new Queen(true, 3, 7, 0));
            pieces.add(new King(true, 4, 7, 0));
        }

    }
}
</code></pre>

<ul>
<li>Command</li>
</ul>

<pre><code class="language-java">public class Command {
	Piece piece;
	int curX, curY, desX, desY;
	public Commanc(Piece piece, int curX, int curY, int desX, int desY) {
		this.piece = piece; 
		this.curX = curX;
		this.curY = curY;
		this.desX = desX;
		this.desY = desY;
	}
}
</code></pre>

</div>


  <footer class="container">
  <div class="container navigation no-print">
  <h2>Navigation</h2>
  
  

    
    <a class="prev" href="http://xmruibi.github.io/2015/10/21/conclusion-on-object-oriented-programming/" title="Conclusion on Object Oriented Programming">
      Earlier Article
    </a>
    

    
    <a class="next" href="http://xmruibi.github.io/2015/10/21/scramble-number-pair-calculator/" title="Scramble Number Pair Calculator">
      Newer Article
    </a>
    

  


</div>

  <div class="container comments">
  <h2>Comments</h2>
  
<div id="disqus_thread"></div>
<script type="text/javascript">
  (function() {
    
    
    
    

    var dsq = document.createElement('script'); dsq.async = true; dsq.type = 'text/javascript';
    dsq.src = '//ruisblog.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


</div>

</footer>

</article>
      <footer id="main-footer" class="container main_footer">
  

  <div class="container nav foot no-print">
<a class="toplink" href="#">Go top</a>

</div>
<div class="container nav foot no-print">
  

  
</div>
  <div class="container credits">
  
<div class="container footline">
  
  Code with <i class='fa fa-heart'> Rui Bi</i>


</div>


  
<div class="container copyright">
  
  &copy; 2015 Rui Bi.


</div>


</div>

</footer>

    </main>
    <script src="http://xmruibi.github.io/js/jquery.min.js"></script>
<script src="http://xmruibi.github.io/js/bootstrap.min.js"></script>
<script src="http://xmruibi.github.io/js/bootstrap.js"></script>
<script src="http://xmruibi.github.io/js/npm.js"></script>
<script src="http://xmruibi.github.io/js/prism.js"></script>
<script src="http://xmruibi.github.io/js/handlebars.js"></script>
<script src="http://xmruibi.github.io/js/search.js"></script>




<script src="http://xmruibi.github.io/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>



<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new
    Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-69058903-1', 'auto');
  ga('send', 'pageview');;
</script>



    
  </body>
</html>

